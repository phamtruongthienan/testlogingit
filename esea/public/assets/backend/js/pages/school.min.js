var app=app||{},table_dynamic_comment,table_dynamic_course,table_dynamic_program,table_dynamic_school;app.init=function(){app.changeUrl($("#inputAddName"),$("#inputAddSEO")),app.changeUrl($("#inputAddSEO"),$("#inputAddSEO")),app.changeUrl($("#inputEditName"),$("#inputEditSEO")),app.changeUrl($("#inputEditSEO"),$("#inputEditSEO")),changeImage("#logoImage",'input[id="logoFile"]'),changeImage("#logoEditImage",'input[id="logoEditFile"]'),$("#schoolDetail, #addSchoolBtn, #editschoolDetail, #editSchoolBtn, #ckbFacility, #addPrevBtn, #editPrevBtn").hide(),$(".select2").select2(),$(".my-colorpicker").colorpicker(),$("#add_city, #edit_city").select2({placeholder:"Chọn tỉnh/thành phố",allowClear:!0}),$("#add_district, #edit_district").select2({placeholder:"Chọn quận/huyện",allowClear:!0}),$("#add_ward, #edit_ward").select2({placeholder:"Chọn phường/xã",allowClear:!0}),$(".slider").slider(),$("#tagCourse, #tagEditCourse").select2({data:["Khóa 2018","Khóa 2017"],tags:!0,tokenSeparators:[","],placeholder:"Tên khóa học"}),$("#tagClass, #tagEditClass").select2({data:["Lớp 01","Lớp 02"],tags:!0,tokenSeparators:[","],placeholder:"Tên lớp học"}),$("#tagTeacher, #tagEditTeacher").select2({data:["Giáo viên mầm non","Giáo viên tiếng anh"],tags:!0,tokenSeparators:[","],placeholder:"Loại giáo viên"}),$("[data-mask]").inputmask(),$("#modal-course-list, #modal-program-list, #modal-comment-list").on("shown.bs.modal",function(a){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}),$(".modal").on("show.bs.modal",function(a){$('input[type="radio"], input[type="checkbox"]').length>0&&$('input[type="radio"], input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"})}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(a){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}),$('a[href="#tab_vn"]').on("show.bs.tab",function(a){console.log("vn")}),$('a[href="#tab_en"]').on("show.bs.tab",function(a){console.log("en")}),$('a[href="#tab_vn_edit"]').on("show.bs.tab",function(a){console.log("vn")}),$('a[href="#tab_en_edit"]').on("show.bs.tab",function(a){console.log("en")}),table_dynamic_school=$(".table-dynamic-school").DataTable({processing:!0,serverSide:!0,ajax:base_admin+"/ajax/school",responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!1,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"level"},{data:"type"},{data:"district"},{data:"action"}],columnDefs:[{targets:[1],class:"text-ellipsis"},{width:"200px",targets:[-1,2,3,4],class:"text-center"},{width:"100px",targets:[0],class:"text-center"},{targets:[-1],orderable:!1}]}),$("#CourseForm").validator().on("submit",function(a){$("#addCourseBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addCourseBtn").button("reset"):(a.preventDefault(),app.CourseFormSubmit())}),$("#addSchoolForm").validator().on("submit",function(a){$("#addSchoolBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addSchoolBtn").button("reset"):(a.preventDefault(),app.SchoolFormSubmit())}),$("#addSchoolForm").validator().on("submit",function(a){$("#addSchoolBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addSchoolBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg").removeClass("no-display"),$("#addSchoolBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#editSchoolForm").validator().on("submit",function(a){$("#editSchoolBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#editSchoolBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg_edit").removeClass("no-display"),$("#editSchoolBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$("#ProgramForm").validator().on("submit",function(a){$("#addProgramBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#addProgramBtn").button("reset"):(a.preventDefault(),app.ProgramFormSubmit())}),$("#editProgramForm").validator().on("submit",function(a){$("#editProgramBtn").button("loading"),$(".alert").addClass("no-display"),a.isDefaultPrevented()?$("#editProgramBtn").button("reset"):(a.preventDefault(),setTimeout(function(){$("#alert_msg_edit").removeClass("no-display"),$("#editProgramBtn").button("reset"),setTimeout(function(){$(".alert").addClass("no-display")},3e3)},1e3))}),$(document).on("click","#confirm-delete-modal #confirm-delete",function(a){a.preventDefault(),$("#confirm-delete-modal #confirm-delete").button("loading");var b=$("#confirm-delete-modal #id").val(),c=$("#confirm-delete-modal #module").val();"comment"==c&&app.DeleteComment(b),"course"==c&&app.DeleteCourse(b),"program"==c&&app.DeleteProgram(b),"school"==c&&app.DeleteSchool(b)}),$(document).on("click",".table-dynamic-comment .table-action-agree",function(a){a.preventDefault();var b=$(this).data("id");app.UpdateCommentStatus(b)}),$(document).on("click",".table-dynamic-comment .table-action-delete",function(a){a.preventDefault();var b=$(this).data("id");app.ConfirmDelete(b,"comment")}),$(document).on("click",".table-dynamic-course .table-action-delete",function(a){a.preventDefault();var b=$(this).data("id");app.ConfirmDelete(b,"course")}),$(document).on("click",".table-dynamic-program .table-action-delete",function(a){a.preventDefault();var b=$(this).data("id");app.ConfirmDelete(b,"program")}),$(document).on("click",".table-dynamic-course .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-course-edit").modal("show")}),$(document).on("click",".table-dynamic-school .table-action-edit",function(a){a.preventDefault();var b=$(this).attr("data-id"),c=$(this).attr("data-lang");app.ClearFormSchool(b,c,"edit"),app.UpdateSchool(b,c)}),$(document).on("click",".table-dynamic-school .table-action-delete",function(a){a.preventDefault();var b=$(this).data("id");app.ConfirmDelete(b,"school")}),$(document).on("click",".table-dynamic-program .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-program-edit").modal("show")}),$(document).on("click",".table-facility .table-action-edit",function(a){a.preventDefault();$(this).data("id");$("#modal-facility-edit").modal("show")}),$(document).on("click","#addSchool",function(a){a.preventDefault(),$("#modal-school-add").modal("show")}),$(document).on("click","#modal-course-list #addCourse",function(a){a.preventDefault();var b=$(this).attr("data-lang"),c=$(this).attr("data-school-id");app.ClearFormCourse(c,b,"add"),$("#modal-course .tab_edit_course").attr("data-id","null"),app.AddCourseForm(b)}),$(document).on("click","#modal-program-list #addProgram",function(a){a.preventDefault();var b=$(this).attr("data-lang"),c=$(this).attr("data-course-id"),d=$(this).attr("data-school-id");app.ClearFormProgram(c,d,b,"add"),$("#modal-program .tab_edit_program").attr("data-id","null"),app.AddProgramForm(b)}),$(document).on("click","#addFacility",function(a){a.preventDefault(),$("#modal-facility-add").modal("show")}),$(document).on("click",".table-dynamic-school .table-action-view-course",function(a){a.preventDefault();var b=$(this).attr("data-id");$("#modal-course-list #addCourse").attr("data-school-id",b),$.fn.DataTable.isDataTable(".table-dynamic-course")&&($(".table-dynamic-course").DataTable().destroy(),$(".table-dynamic-course tbody").empty()),app.ViewCourse(b)}),$(document).on("click",".table-dynamic-course .table-action-view-program",function(a){a.preventDefault();var b=$(this).attr("data-id"),c=$(this).attr("data-school-id");$("#modal-program-list #addProgram").attr("data-course-id",b),$("#modal-program-list #addProgram").attr("data-school-id",c),$.fn.DataTable.isDataTable(".table-dynamic-course")&&($(".table-dynamic-program").DataTable().destroy(),$(".table-dynamic-program tbody").empty()),app.ViewProgram(b)}),$(document).on("click",".table-dynamic-program .table-action-edit, #modal-program .tab_edit_program",function(a){a.preventDefault();var b=$(this).attr("data-id"),c=$(this).attr("data-lang"),d=$(this).attr("data-course-id"),e=$(this).attr("data-school-id");app.ClearFormProgram(d,e,c,"edit"),app.UpdateProgram(b,c)}),$(document).on("click",".table-dynamic-school .table-action-view-comment",function(a){a.preventDefault();var b=$(this).attr("data-id");app.ViewComment(b)}),$(document).on("click",".table-dynamic-comment .table-action-reply",function(a){a.preventDefault();var b=$(this).attr("data-id");$("#modal-comment-reply #content").summernote("code",""),$("#modal-comment-reply #id").val(b),app.ViewCommentReply(b)}),$(document).on("click","#modal-comment-reply #addCommentReply",function(a){a.preventDefault(),app.UpdateCommentReply()}),$(document).on("click","#modal-course .tab_edit_course",function(a){a.preventDefault();var b=$(this).attr("data-language");$("#modal-course #language_id").val(b)}),$(document).on("click",".table-dynamic-course .table-action-edit, #modal-course .tab_edit_course",function(a){a.preventDefault();var b=$(this).attr("data-id"),c=$(this).attr("data-lang"),d=$(this).attr("data-school-id");app.ClearFormCourse(d,c,"edit"),app.UpdateCourse(b,c)}),$(document).on("click",".table-dynamic-course .table-action-add",function(a){a.preventDefault(),$("#modal-program-list").modal("show")}),$(document).on("click","#addSchoolBtn",function(a){a.preventDefault(),$("#addSchoolForm").submit()}),$(document).on("click","#editSchoolBtn",function(a){a.preventDefault(),$("#editSchoolForm").submit()}),$(document).on("click","#addCourseBtn",function(a){a.preventDefault(),$("#CourseForm").submit()}),$(document).on("click","#editCourseBtn",function(a){a.preventDefault(),$("#editCourseForm").submit()}),$(document).on("click","#addProgramBtn",function(a){a.preventDefault(),$("#ProgramForm").submit()}),$(document).on("click","#editProgramBtn",function(a){a.preventDefault(),$("#editProgramForm").submit()}),$(document).on("click","#addNextBtn",function(a){$(this).hide(),$("#schoolGeneral").hide(),$("#schoolDetail, #addSchoolBtn, #addPrevBtn").show()}),$(document).on("click","#addPrevBtn",function(a){$(this).hide(),$("#schoolGeneral, #addNextBtn").show(),$("#schoolDetail, #addSchoolBtn").hide()}),$(document).on("click","#editNextBtn",function(a){$(this).hide(),$("#editschoolGeneral").hide(),$("#editschoolDetail, #editSchoolBtn, #editPrevBtn").show()}),$(document).on("click","#editPrevBtn",function(a){$(this).hide(),$("#editschoolGeneral, #editNextBtn").show(),$("#editschoolDetail, #editSchoolBtn").hide()}),$("#add_type_facility").on("change",function(a){"1"==$(this).val()?($("#ckbFacility").hide(),$("#inputFacility").show()):($("#ckbFacility").show(),$("#inputFacility").hide())}),$(".example-movie").barrating("show",{theme:"bars-movie"})},app.xoa_dau=function(a){return a=a.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),a=a.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),a=a.replace(/ì|í|ị|ỉ|ĩ/g,"i"),a=a.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),a=a.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),a=a.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),a=a.replace(/đ/g,"d")},app.string_to_slug=function(a){return a=a.replace(/^\s+|\s+$/g,""),a=a.toLowerCase(),a=app.xoa_dau(a),a=a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},app.changeUrl=function(a,b){a.keyup(function(){var a=$(this).val(),c=app.string_to_slug(a);b.val(c)})},app.ConfirmDelete=function(a,b){$("#confirm-delete-modal #id").val(a),$("#confirm-delete-modal #module").val(b),$("#confirm-delete-modal").modal({backdrop:"static",keyboard:!1})},app.UpdateCommentStatus=function(a){$.ajax({url:base_admin+"/ajax/school/comment?action=status&id="+a,type:"post",success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_comment.ajax.reload(null,!0)):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.DeleteComment=function(a){$.ajax({url:base_admin+"/ajax/school/comment?action=delete&id="+a,type:"post",success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_comment.ajax.reload(null,!0)):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")}})},app.ViewComment=function(a){$.fn.DataTable.isDataTable(".table-dynamic-comment")&&($(".table-dynamic-comment").DataTable().destroy(),$(".table-dynamic-comment tbody").empty()),table_dynamic_comment=$(".table-dynamic-comment").DataTable({processing:!0,serverSide:!0,ajax:base_admin+"/ajax/school/comment?id="+a,responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,order:[[3,"desc"]],columns:[{data:"id"},{data:"name"},{data:"address"},{data:"created_at"},{data:"content"},{data:"rating"},{data:"reply"},{data:"action"}],columnDefs:[{width:"50px",targets:[0],class:"text-center",orderable:!0},{width:"100px",targets:[1],class:"text-center",orderable:!1},{width:"100px",targets:[2],class:"text-center",orderable:!1},{width:"100px",targets:[3],class:"text-center",orderable:!0},{width:"400px",targets:[4],class:"text-multi-row",orderable:!1},{width:"100px",targets:[5],class:"text-center",orderable:!0},{width:"50px",targets:[6],class:"text-center",orderable:!1},{width:"50px",targets:[7],class:"text-center",orderable:!1}],drawCallback:function(a){$('[data-toggle="tooltip"]').tooltip(),$(".article").expander()},initComplete:function(a,b){$('[data-toggle="tooltip"]').tooltip(),$(".article").expander(),$("#modal-comment-list").modal("show")}})},app.ViewCommentReply=function(a){$.ajax({url:base_admin+"/ajax/school/comment?comment_id="+a,type:"get",success:function(a){"200"==a.code?(a.data.mSchoolCommentReplies.length>0&&$("#modal-comment-reply #content").summernote("code",a.data.mSchoolCommentReplies[0].content),$("#modal-comment-reply").modal("show")):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.UpdateCommentReply=function(){$.ajax({url:base_admin+"/ajax/school/comment",type:"post",data:$("#modal-comment-reply #CommentReplyForm").serialize(),success:function(a){"200"==a.code?table_dynamic_comment.ajax.reload(null,!0):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),$("#modal-comment-reply").modal("hide")},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.DeleteCourse=function(a){$.ajax({url:base_admin+"/ajax/school/course?action=delete&id="+a,type:"post",success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_course.ajax.reload(null,!0)):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")}})},app.ClearFormCourse=function(a,b,c){"add"==c?($("#modal-course .nav-tabs").hide(),$("#modal-course .form-title").html("Thêm khóa học mới"),$("#modal-course #action").val("insert")):($("#modal-course .nav-tabs").show(),$("#modal-course .form-title").html("Thay đổi khóa học"),$("#modal-course #action").val("update")),$("#modal-course ul > li").removeClass("active"),$("#modal-course .tab_edit_course[data-lang="+b+"]").parent().addClass("active"),$("#modal-course #lang").val(b),$("#modal-course #school_id").val(a),$("#modal-course #meta_title").val(""),$("#modal-course #meta_keyword").val(""),$("#modal-course #meta_description").val(""),$("#modal-course #school_class").empty(),$("#modal-course #name").val(""),$("#modal-course #name_class").val(""),$("#modal-course #content").summernote("code",""),$("#modal-course #school_class").val(null).trigger("change"),$("#modal-course #age").slider("setValue",[0,0]),$("#modal-course #age_month").slider("setValue",[0,0]),$("#modal-course #num_student").val(""),$("#modal-course #num_teacher").val(""),$("#modal-course #start_date").val(""),$("#modal-course #end_date").val(""),$("#modal-course #status").iCheck("uncheck")},app.CourseFormSubmit=function(){$.ajax({url:base_admin+"/ajax/school/course",type:"post",data:$("#CourseForm").serialize(),success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_course.ajax.reload(null,!0),$("#addCourseBtn").button("reset"),$("#modal-course").modal("hide")):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.AddCourseForm=function(a){$.ajax({url:base_admin+"/ajax/school/course?action=view&lang="+a+"&id=null",type:"get",success:function(b){"200"==b.code?($.each(b.school_class,function(b,c){$.each(c.mSchoolClassTranslationsAll,function(b,c){if(a==c.language_id){var d=new Option(c.name,c.id,!1,!1);$("#modal-course #school_class").append(d).trigger("change")}})}),$("#modal-course").modal("show")):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.ViewCourse=function(a){table_dynamic_course=$(".table-dynamic-course").DataTable({processing:!0,serverSide:!0,ajax:base_admin+"/ajax/school/course?id="+a,responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"name_class"},{data:"start_date"},{data:"end_date"},{data:"num_student"},{data:"program"},{data:"action"}],columnDefs:[{width:"50px",targets:[0],class:"text-center",orderable:!0},{width:"100px",targets:[1],class:"text-center",orderable:!1},{width:"100px",targets:[2],class:"text-center",orderable:!1},{width:"100px",targets:[3],class:"text-center",orderable:!0},{width:"100px",targets:[4],class:"text-center",orderable:!0},{width:"100px",targets:[5],class:"text-center",orderable:!0},{width:"50px",targets:[6],class:"text-center",orderable:!1},{width:"50px",targets:[7],class:"text-center",orderable:!1}],drawCallback:function(a){$('[data-toggle="tooltip"]').tooltip(),$(".article").expander()},initComplete:function(a,b){$('[data-toggle="tooltip"]').tooltip(),$(".article").expander(),$("#modal-course-list").modal("show")}})},app.UpdateCourse=function(a,b){$.ajax({url:base_admin+"/ajax/school/course?action=view&lang="+b+"&id="+a,type:"get",success:function(a){"200"==a.code&&(void 0!==a.school_class&&$.each(a.school_class,function(a,c){$.each(c.mSchoolClassTranslationsAll,function(a,d){if(b==d.language_id){var e=new Option(d.name,c.id,!1,!1);$("#modal-course #school_class").append(e).trigger("change")}})}),void 0!==a.data.mSchoolCourseTranslationsAll&&$.each(a.data.mSchoolCourseTranslationsAll,function(a,c){b==c.language_id&&($("#modal-course #name").val(c.name),$("#modal-course #name_class").val(c.name_class),$("#modal-course #meta_title").val(c.meta_title),$("#modal-course #meta_keyword").val(c.meta_keyword),$("#modal-course #meta_description").val(c.meta_description),$("#modal-course #content").summernote("code",c.content))}),void 0!==a.data.mSchoolClass&&$.each(a.data.mSchoolClass.mSchoolClassTranslationsAll,function(a,c){b==c.language_id&&$("#modal-course #school_class").val(c.id).trigger("change")}),Object.keys(a.data).length>0&&($("#modal-course #id").val(a.data.id),$("#modal-course .tab_edit_course").attr("data-id",a.data.id),1==a.data.age_month?$("#modal-course #age_month").slider("setValue",[a.data.age,a.data.age_to]):$("#modal-course #age").slider("setValue",[a.data.age,a.data.age_to]),$("#modal-course #num_student").val(a.data.num_student),$("#modal-course #num_teacher").val(a.data.num_teacher),$("#modal-course #start_date").val(a.data.start_date),$("#modal-course #end_date").val(a.data.end_date),1==a.data.status?$("#modal-course #status").iCheck("check"):$("#modal-course #status").iCheck("uncheck")),$("#modal-course").modal("show"))},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:response.msg})}})},app.ViewProgram=function(a){table_dynamic_program=$(".table-dynamic-program").DataTable({processing:!0,serverSide:!0,ajax:base_admin+"/ajax/school/program?id="+a,responsive:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,scrollX:!0,scrollCollapse:!0,columns:[{data:"id"},{data:"name"},{data:"time"},{data:"fee"},{data:"action"}],columnDefs:[{targets:[1],class:"text-ellipsis"},{width:"200px",targets:[-1],class:"text-center"},{width:"100px",targets:[0],class:"text-center"},{targets:[-1],orderable:!1}],drawCallback:function(a){$('[data-toggle="tooltip"]').tooltip(),$(".article").expander()},initComplete:function(a,b){$('[data-toggle="tooltip"]').tooltip(),$(".article").expander(),$("#modal-program-list").modal("show")}})},app.ClearFormProgram=function(a,b,c,d){"add"==d?($("#modal-program .nav-tabs").hide(),$("#modal-program .form-title").html("Thêm chương trình mới"),$("#modal-program #action").val("insert")):($("#modal-program .nav-tabs").show(),$("#modal-program .form-title").html("Thay đổi chương trình"),$("#modal-program #action").val("update")),$("#modal-program ul > li").removeClass("active"),$("#modal-program .tab_edit_program[data-lang="+c+"]").parent().addClass("active"),$("#modal-program #lang").val(c),$("#modal-program #school_course_id").val(a),$("#modal-program #school_id").val(b),$("#modal-program #unit1").val(null).trigger("change"),$("#modal-program #unit2").val(null).trigger("change"),$("#modal-program #unit3").val(null).trigger("change"),$("#modal-program #unit4").val(null).trigger("change"),$("#modal-program #name").val(""),$("#modal-program #time").val(""),$("#modal-program #fee").val(""),$("#modal-program #content").summernote("code","")},app.AddProgramForm=function(a){$("#modal-program").modal("show")},app.UpdateProgram=function(a,b){$.ajax({url:base_admin+"/ajax/school/program?action=view&lang="+b+"&id="+a,type:"get",success:function(a){"200"==a.code?(void 0!==a.data.mSchoolProgramTranslationsAll&&$.each(a.data.mSchoolProgramTranslationsAll,function(a,c){b==c.language_id&&($("#modal-program #name").val(c.name),$("#modal-program #content").summernote("code",c.content))}),$("#modal-program #id").val(a.data.id),$("#modal-program #time").val(a.data.time),$("#modal-program #fee").val(a.data.fee),$("#modal-program #unit1").val(a.data.unit_1).trigger("change"),$("#modal-program #unit2").val(a.data.unit_2).trigger("change"),$("#modal-program #unit3").val(a.data.unit_3).trigger("change"),$("#modal-program #unit4").val(a.data.unit_4).trigger("change"),$("#modal-program .tab_edit_program").attr("data-id",a.data.id),$("#modal-program").modal("show")):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.ProgramFormSubmit=function(){$.ajax({url:base_admin+"/ajax/school/program",type:"post",data:$("#ProgramForm").serialize(),success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_program.ajax.reload(null,!0),$("#addProgramBtn").button("reset"),$("#modal-program").modal("hide")):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.DeleteProgram=function(a){$.ajax({url:base_admin+"/ajax/school/program?action=delete&id="+a,type:"post",success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_program.ajax.reload(null,!0)):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")}})},app.ClearFormSchool=function(a,b,c){"add"==c?($("#modal-school .nav-tabs").hide(),$("#modal-school .form-title").html("Thêm trường học mới"),$("#modal-school #action").val("insert")):($("#modal-school .nav-tabs").show(),$("#modal-school .form-title").html("Thay đổi trường học"),$("#modal-school #action").val("update")),$("#modal-school ul > li").removeClass("active"),$("#modal-school .tab_edit_school[data-lang="+b+"]").parent().addClass("active"),$("#modal-school #lang").val(b),$("#modal-school #id").val(a),$("#modal-school #name").val(""),$("#modal-school #slug").val(""),$("#modal-school #meta_title").val(""),$("#modal-school #meta_keyword").val(""),$("#modal-school #meta_description").val(""),$("#modal-school .branch").iCheck("uncheck"),$("#modal-school #address").val(""),$("#modal-school #city").val(null).trigger("change"),$("#modal-school #district").val(null).trigger("change"),$("#modal-school #ward").val(null).trigger("change"),$("#modal-school #branch_school").val(null).trigger("change"),$("#modal-school #level").val(null).trigger("change"),$("#modal-school #type").val(null).trigger("change"),$("#modal-school #phone").val(""),$("#modal-school #email").val(""),$("#modal-school .teacher").val(""),$("#modal-school .num_teacher").val(""),$("#modal-school #image360").val(""),$("#modal-school #info").summernote("code",""),$("#modal-school #pdf").val(""),$("#modal-school #intro").summernote("code",""),$("#modal-school #video").val(""),$("#modal-school .imagefile").val(""),$("#modal-school #background_1").val(""),$("#modal-school #background_2").val(""),$("#modal-school #background_3").val(""),$("#modal-school #background_4").val(""),$("#modal-school #background_5").val(""),$("#modal-school #search").iCheck("uncheck"),$("#modal-school #status").iCheck("uncheck"),$("#modal-school #language").val(null).trigger("change"),$("#modal-school #fee").val("0,0")},app.UpdateSchool=function(a,b){$.ajax({url:base_admin+"/ajax/school?action=view&lang="+b+"&id="+a,type:"get",success:function(a){"200"==a.code?$("#modal-school").modal("show"):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},app.DeleteSchool=function(a){$.ajax({url:base_admin+"/ajax/school?action=delete&id="+a,type:"post",success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_school.ajax.reload(null,!0)):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"}),$("#confirm-delete-modal").modal("hide"),$("#confirm-delete-modal #confirm-delete").button("reset")}})},app.SchoolFormSubmit=function(){$.ajax({url:base_admin+"/ajax/school",type:"post",data:$("#SchoolForm").serialize(),success:function(a){"200"==a.code?(Lobibox.notify("success",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg}),table_dynamic_school.ajax.reload(null,!0),$("#addSchoolBtn").button("reset"),$("#modal-school").modal("hide")):Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:a.msg})},error:function(a,b,c){Lobibox.notify("warning",{title:"Thông báo",pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,icon:!1,sound:!1,msg:"Có lỗi trong quá trình xử lý"})}})},$(function(){app.init()});